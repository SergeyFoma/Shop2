{% extends "base.html" %}
{% load static %}

{% load catalog_tags %}

{% block content %}

#фильтрация товаров

<form action=""method='get'>
    <input type="checkbox"id='discount_goods'name='discount'value='discount'{%if request.GET.discount == 'discount' %}checked{%endif%}>
    <label for="discount_goods">Товары по акции</label>
        
    <input type="radio"id='order_by_goods'name='order_by'value='-price'{%if request.GET.order_by == '-price' %}checked{%endif%}>
    <label for="order_by_goods">От дорогих к дешёвым</label>

    <input type="radio"id='order_by_goods'name='order_by'value='price'{%if request.GET.order_by == 'price' %}checked{%endif%}>
    <label for="order_by_goods">От дешёвых к дорогим</label>

    <button type='submit'>Применить</button>

</form>
    <h2>{{categ.name}}</h2>

    {% for p in goods %}
    <p>{{p.slug}}</p>
        <p><a href="{% url "goods:product" prod_slug=p.slug %}">{{p.name}}</a></p>
        <p>{{p.description}}</p>
        <p><img src="{{p.image.url}}"alt='#'></p>
        <p>{{p.price}}</p>
        <p>{{p.discount}}%</p>
        <p>{{p.quantity}}шт</p>
    {% endfor %}


<div class="pagination">
    <span class="step-links">
        {% if goods.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ goods.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            
            {% for pag in goods.paginator.page_range %}
                {%comment%}<a href="?page={{p}}">{{p}}</a>{%endcomment%}
                <a href="?{% search_goods page=pag%}">{{pag}}</a>
            {%endfor%}
        </span>

        {% if goods.has_next %}
            <a href="?page={{ goods.next_page_number }}">next</a>
            <a href="?ppage={{goods.paginator.num_pages}}">last &raquo;</a>
        {% endif %}
    </span>
</div>
<p>{{request.GET.dict}}</p>

{% endblock content %}